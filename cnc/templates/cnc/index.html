{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CyberNetCall</title>
  <link rel="manifest" href="{% static 'cnc/manifest.json' %}">
  <link rel="icon" href="{% static 'cnc/icons/favicon.ico' %}" sizes="any">
  <link rel="apple-touch-icon" href="{% static 'cnc/icons/apple-touch-icon.png' %}">
  <link rel="stylesheet" href="{% static 'cnc/style.css' %}">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js" defer></script>
  <script src="https://unpkg.com/idb@7/build/umd.js" defer></script>
  <script src="https://unpkg.com/html5-qrcode" defer></script>
  <script src="{% static 'cnc/app.js' %}" defer></script>
</head>
<body>
  <div class="app-container">

    <header class="app-header">
      <h1>CyberNetCall</h1>
      <div id="connectionStatus" class="connection-status"></div>
    </header>

    <main class="main-content">
      <section class="section video-meeting-section">
        <h2>Video Meeting</h2>
        <div class="video-container">
          <div class="video-wrapper">
             <video id="remoteVideo" autoplay playsinline></video>
             <span class="video-label">Remote</span>
          </div>
          <div class="video-wrapper local-video-wrapper">
             <video id="localVideo" autoplay muted playsinline></video>
             <span class="video-label">Local</span>
          </div>
        </div>
        <div class="call-controls">
          <button id="callButton" aria-label="Start/End Call">ðŸ“ž Call</button>
          <button id="videoButton" aria-label="Toggle Video" style="display: none;">ðŸŽ¥ Video On</button>
          <!-- File Sharing UI -->
          <div class="file-share">
              <label for="fileInput" class="visually-hidden">Select file to send</label>
              <input type="file" id="fileInput" aria-label="Select file to send">
              <!-- Changed button ID -->
              <button id="sendFileButton" disabled>Send File</button>
          </div>
        </div>
      </section>

      <section id="connection-setup" class="section connection-setup-section">
         <h2>Connection Setup</h2>
         <p>Scan the QR code or let your peer scan yours.</p>
         <canvas id="qrcode"></canvas>
         <div id="qr-reader"></div>
         <div id="qr-reader-results"></div>
      </section>
    </main>

    <aside class="sidebar">
      <!-- File Transfer Status Area -->
      <section class="section file-transfer-section">
          <h2>File Transfers</h2>
          <div id="fileTransferArea" class="file-transfer-area">
              <!-- Status messages and download links will appear here -->
          </div>
      </section>

      <section class="section chat-section">
        <h2>Direct Mail</h2>
        <div id="messageArea" class="message-area"></div>
        <div class="input-area">
          <label for="messageInput" class="visually-hidden">Direct Message</label>
          <input type="text" id="messageInput" placeholder="Type a message..." aria-label="Direct Message">
          <button id="sendMessage">Send</button>
        </div>
      </section>

      <section class="section post-section">
        <h2>Group Chat</h2>
         <div id="postArea" class="post-area"></div>
        <div class="input-area">
          <label for="postInput" class="visually-hidden">Post Content</label>
          <input type="text" id="postInput" placeholder="Write your post..." aria-label="Post Content">
          <button id="sendPost">Post</button>
        </div>
      </section>
    </aside>

  </div>
</body>
</html>
